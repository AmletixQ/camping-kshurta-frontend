import{r as u,j as s}from"./index-DoH7HiF3.js";import{C as y}from"./Container-jKDBQQGZ.js";const $=e=>e.startsWith("7")?e.length<=1?`+${e}`:e.length<=4?`+7 (${e.slice(1)}`:e.length<=7?`+7 (${e.slice(1,4)}) ${e.slice(4)}`:e.length<=9?`+7 (${e.slice(1,4)}) ${e.slice(4,7)}-${e.slice(7)}`:`+7 (${e.slice(1,4)}) ${e.slice(4,7)}-${e.slice(7,9)}-${e.slice(9)}`:e?`+${e}`:"",k=e=>{const[n,t]=u.useState(!1),[o,l]=u.useState({isOpen:!1,type:"error"});return{request:async()=>{t(!0);const c=await fetch("/api/send.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullname:e.fullname,phonenumber:e.phoneNumber})}).then(a=>a.json()).then(a=>a).catch(a=>console.log(a));return console.log(c),c?(l({isOpen:!0,type:"success"}),t(!1),{success:!0}):(l({isOpen:!0,type:"error",message:c||"Ошибка сервера, попробуйте позже"}),t(!1),{success:!1})},isLoading:n,closeModal:()=>l(c=>({...c,isOpen:!1})),modal:o}},S="_input_1fuiz_1",w="_input__error_1fuiz_6",z="_input__content_1fuiz_10",h={input:S,input__error:w,input__content:z},N=({label:e,htmlFor:n,error:t,...o})=>s.jsxs("div",{className:h.input,children:[s.jsxs("div",{className:h.input__content,children:[s.jsx("label",{htmlFor:n,children:e}),s.jsx("input",{id:n,...o})]}),t&&s.jsx("span",{className:h.input__error,children:t})]}),L=()=>s.jsxs("svg",{width:"121",height:"120",viewBox:"0 0 121 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("circle",{cx:"60.5",cy:"60",r:"57.6",stroke:"#6C943C",strokeWidth:"4.8"}),s.jsx("path",{d:"M52.6799 71.7391L81.8844 41.8896C82.5736 41.1852 83.3777 40.833 84.2966 40.833C85.2155 40.833 86.0196 41.1852 86.7087 41.8896C87.3979 42.594 87.7425 43.4311 87.7425 44.4009C87.7425 45.3706 87.3979 46.2065 86.7087 46.9086L55.0921 79.3115C54.4029 80.0159 53.5988 80.3681 52.6799 80.3681C51.761 80.3681 50.9569 80.0159 50.2677 79.3115L35.4501 64.1667C34.7609 63.4622 34.4301 62.6263 34.4576 61.659C34.4852 60.6916 34.8447 59.8545 35.5362 59.1477C36.2277 58.441 37.0467 58.0888 37.9932 58.0911C38.9397 58.0935 39.7575 58.4457 40.4467 59.1477L52.6799 71.7391Z",fill:"#6C943C"})]}),q="_button_ks3m3_1",O={button:q},v=e=>s.jsx("button",{...e,className:O.button}),M="_modal_1vm6v_1",E="_modal__container_1vm6v_21",F="_modal__title_1vm6v_31",x={modal:M,modal__container:E,modal__title:F},D=({isOpen:e,onClose:n,type:t,message:o})=>(u.useEffect(()=>{const l=document.querySelector("html");l&&(l.style.overflow=e?"hidden":"auto")},[e]),s.jsx("div",{onClick:n,className:x.modal,"data-open":e?"opened":"closed",children:s.jsxs("div",{className:x.modal__container,children:[t==="success"&&s.jsx(L,{}),s.jsx("h2",{className:x.modal__title,children:t==="success"?"Ваша заявка отправлена!":o}),s.jsx(v,{onClick:n,children:"Закрыть"})]})})),B="_form_ykl4p_1",Z="_form__inputs_ykl4p_8",g={form:B,form__inputs:Z},A=()=>{const[e,n]=u.useState({}),[t,o]=u.useState({fullname:"",phoneNumber:""}),{request:l,isLoading:f,modal:_,closeModal:c}=k(t),a=async i=>{i.preventDefault();const r={fullname:j("fullname",t.fullname),phoneNumber:j("phoneNumber",t.phoneNumber)};if(n(r),Object.values(r).some(Boolean))return;const{success:m}=await l();m&&o({fullname:"",phoneNumber:""})},j=(i,r)=>{if(!r.trim())return"Обязательное поле";if(i==="fullname"){if(r.length<4)return"Слишком короткое имя";if(!/^[A-Za-zА-Яа-яЁё\s\-']+$/u.test(r))return"Только буквы и дефисы"}else if(i==="phoneNumber"&&r.replace(/\D/g,"").length<11)return"Номер слишком короткий";return""},b=i=>r=>{const m=r.target.value;let p;i==="fullname"?p=m.replace(/[^A-Za-zА-Яа-яЁё\s\-']/gu,"").replace(/\s+/g," ").trim():p=$(m.replace(/\D/g,"").slice(0,16)),o(C=>({...C,[i]:p}))};return s.jsxs(s.Fragment,{children:[s.jsxs("form",{className:g.form,onSubmit:a,children:[s.jsxs("div",{className:g.form__inputs,children:[s.jsx(N,{required:!0,label:"Имя",htmlFor:"name",placeholder:"Иван Иванов",value:t.fullname,onChange:b("fullname"),error:e.fullname,minLength:4}),s.jsx(N,{required:!0,type:"tel",label:"Телефон",htmlFor:"phone",placeholder:"+7 900 800 00 00",value:t.phoneNumber,onChange:b("phoneNumber"),error:e.phoneNumber,minLength:11})]}),s.jsx(v,{type:"submit",disabled:f,className:g.form__button,children:f?"Отправка...":"Оставить заявку"})]}),s.jsx(D,{isOpen:_.isOpen,onClose:c,type:_.type,message:_.message})]})},I="_container_1krzc_2",P="_form_1krzc_7",R="_form__container_1krzc_18",T="_form__box_1krzc_23",d={container:I,form:P,form__container:R,form__box:T},W="/images/form-image.png",G=()=>s.jsx(y,{className:d.container,id:"form",children:s.jsxs("div",{className:d.form,id:"form",children:[s.jsxs("div",{className:d.form__container,children:[s.jsxs("div",{className:d.form__box,children:[s.jsx("h2",{children:"Оставить заявку"}),s.jsx("p",{children:"Оставь заявку, чтобы отправиться в это незабываемое путешествие"})]}),s.jsx(A,{})]}),s.jsx("img",{src:W,alt:""})]})});export{G as default};
